#!/usr/bin/env bash

# This script gathers samples from 100 runs, and copies all of the results into a subdirectory, and then runs a script
# to analyze the runtimes of PoC vs linear search

# Change this to whatever number you desire. Default: 100.
NUMBER_SAMPLES=100

take_sample() {
  index=$1
  ./poc.sh "${index}"
  echo "PoC #${index} done."
  ./linear.sh "${index}"
  cp ./key-pairs.json "samples/keypairs-${index}.json"
  echo "Linear Serach #${index} done."
}

echo "BEGINNING ${NUMBER_SAMPLES} SAMPLE COLLECTION."
COUNTER=0
while [  $COUNTER -lt $NUMBER_SAMPLES ]; do
  take_sample $COUNTER
  COUNTER=$((COUNTER+1))
  echo "SAMPLE ${COUNTER} TAKEN."
done

# Now that we have the desired number of samples, analyze them
php analyze_samples.php $NUMBER_SAMPLES
